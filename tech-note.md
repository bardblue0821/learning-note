# React のノート
- 親しみが無かった機能や用語を残す。

# JavaScript ES20xx
- リテラル表現
  - リテラル: 変数に格納できる値そのものや記法
  - 数値リテラル、文字列リテラル、関数リテラル、オブジェクトリテラル
  - テンプレ―ト文字列
    - 文字列を ‘ でくくる。変数を埋め込むことができる。
    - `Hello, ${name}` のような形で展開できる。
  - 数値セパレーター
    - 123_456_789 のように、例えばカンマ区切りの場所に_ を入れることができる。
  - アロー関数
    ```JavaScript
    const circle = (radius) => (radius **2) * Math.PI;
    ```
- 可変長引数
  - ```JavaScript
    function sum(...nums) {
        let ressult = 0;
        for (const num of nums) {
            result += num;
        }
        return result;
    }
    console.log(sum(10, 25, 2));
    console.log(sum(7, 13, 25, 6, 100));
    ```
- スプレッド構文
  - 配列の要素をばらす
  - ```JavaScript
    console.log(sum(...[10, 25, 2]));
    ```
- Null 合体演算子 ??
  - `value ?? 'default'`
  - `value ??= 'default'`
  - Null だった場合に何かを行う

- モジュール化
  - export 修飾子がある内容だけが外部モジュールから参照可能になる
  - 既定のエクスポート: `export default class ... ` のように `default` 修飾子をつける
  - `import Util, { getTriangle } from './Util.js'` で、｛｝があるとdefault以外のオブジェクト
  - export は最後にまとめて `export { getTriangle, Article }` のように記述することができる。
  - 動的インポート: `import('./App.js').then(app => { ... });`

# React basic
- npx: Node.js で提供されるコマンド。ローカルにインストールされたツールを実行するためのパッケージランナー。
- ディレクトリ構成![ディレクトリ構成]({04225C57-4425-4515-A60C-02597422B952}.png)
- manifest.json: Web ページをネイティブアプリとして利用する際に、スマホのホーム画面などに表示するアイコンやタイトル、起動時の見た目を指定する。
- npm run build: アプリを実行可能状態にし、本番環境にデプロイ（配置）するためのファイル一式を作成する。
- 仮想DOM: メモリ上に置かれた DOM のコピー。一旦ここで DOM 操作を行い、最終的な変更部分のみを実 DOM に反映させる。
- JSX
  - 唯一のルート要素を持つ
    - 複数の場合は <> ... </> でくくる
  - 空要素は .../> で終える
  - {...} で JavaScript の式を埋め込める
- Props と State
  - ![Props と State]({003AA579-3232-4CF7-89D8-86517A2E8522}.png)
  - Props: 外から値を受け取る
  - State: 状態を管理する。イベントで遷移する
    - イベント: ボタンクリック、入力値変更、ページのロードなど、ユーザー操作とブラウザ処理のタイミング
    - イベントハンドラー: イベントによって呼び出される関数
    - イベントハンドラー ＋ JSX という形で記述。
- useState
  - State が更新された・渡されたPropsが変更された場合・親コンポーネントが再描画された場合
  - 更新の際は setXxxx には関数を引き渡すべき
- 親子コンポーネント間の情報伝達
  - 親から子: Props で引き渡す
  - 子から親: State で引き渡す
- React で用いられるイベント
  - onAnimationStart: CSSアニメーションがスタートしたとき
  - onAnimationIteration: CSS アニメーションが1週終了し、次の周回が始まったとき
  - onKeyDown/Up
  - onClick
  - onMouseEnter: マウスが要素に入ったとき
- イベントオブジェクト
  - イベントに関わる情報を管理する
  - JavaScript によって自動生成される
  - イベントに関する情報（種類や発生元）にアクセスできる
  - イベントハンドラーの第一引数にeやevなど（名前は何でもよい）を記入するだけ
    - イベント駆動型と呼ばれる仕組みらしい。
- イベントの伝播
  - キャプチャフェーズ: 最上位の window オブジェクトから解の要素にイベントを伝播
  - ターゲットフェーズ: イベントの発生元要素を特定
  - バブリングフェーズ: かいのようそで発生したイベントを上位の要素に伝播
  - イベント処理はイベントの発生元だけで行われるわけではない
    - 子の要素でonClickでリンクをクリックすると、その情報は全ての親のonClickに伝播する
    - 子の要素だけでイベントをとどめるには、`e.stopPropagation()`をイベントハンドラで呼ぶ。
    - 子の要素でデフォルトのイベント(Submit で 送信する、など)を抑制するには、`e.preventDefault()`を使用する

# コンポーネント開発(フォーム)
- 算出プロパティ名: 名前の通りに考える。プロパティのキーの名前を変数にできる。`[key]="name"; obj={[key]: "Tom"}`
- 検証機能 React Hook Form
  - useForm の定義 `const { register, handleSubmit, formState: { errors }} = useForm({ defaultValues });
  - errors オブジェクトで検証結果を参照する`
  - 検証ライブラリと連携可能。yupやZodやJoiなど。

# React ライブラリ
- Material UI (MUI)
  - キレイなボタンとか
  - テーマ: createTheme関数でデザインをカスタマイズ可能
    - palette の mode プロパティでダークモードも実装可能
- Storybook
  - コンポーネントを個別に開発・テスト・ドキュメント化できるツール
  - カタログのように一覧表示し、実際の動作や見た目を確認できる
  - UIデザイナーや開発者が、アプリ本体とは独立してコンポーネント単位で開発・レビューできる
  - ドキュメントや動作例（ストーリー）を自動生成できる
  - コンポーネントの動作確認・テスト、UIパーツのカタログ化・共有、デザインシステムの構築
  - ポート番号は6006に
- REact Query
  - 外部サービスからデータを取得する
  - fetchは「データ取得のみ」
  - React Queryは「データ取得＋キャッシュ＋状態管理＋再取得など多機能」

# その他のフック
- useEffect
  - React 外部と関わるときにのみ使用するように
- useRef
  - Props/State で完結できないときにのみ使用するように
- useReducer
  - 複合的なStateや複雑な操作を伴う場合は、useState の代わりに useReducer を用いる
  - ![Reducerの用語]({5CFF0B83-413E-4DAC-A998-05C135622FD8}.png)
  - 頭が働くときにもう一度読む
- useContext
  - Propsの受け渡しは親子間でしかできない → バケツリレーが発生
  - グローバルな State の定義ができる
  - コンポーネントの再利用性を失う
  - ダークモードの変更など
- Recoil
  - ステート管理ライブラリ
    - Redux などの仲間
  - useState のように使うが、管理するのは Atom と呼ばれる別の JS。
  - パフォーマンス向上が期待される
    - アトムやセレクタ―が参照しているコンポーネントだけが再レンダリングされる。
      - アトム: 
        - グローバルに管理する状態・値の単位。
        - Stateを管理するストア。
        - アプリ一意な key で管理
        - default: 既定値
      - セレクター: 
        - アトムの値を元に計算したり、派生した値を作るための関数
        - Atom のためのゲッター関数といえる。
- memo useMemo useCallback 関数
  - 関数や結果をメモ化する
  - memo: コンポーネントの出力をメモ化
  - useMemo: 関数の結果をメモ化
  - useCallback: 関数そのものをメモ化
  - サーバーの問合せなど、パフォーマンスに問題が出てからすれば十分。一時領域を使うので。

# Next.js 
- ORM: オブジェクト・リレーショナル・マッパー
  - JavaScript オブジェクト と データベースとの橋渡しになるライブラリ
  - Prisma や TypeORM や Sequelize がある


# 今後の方針
- React のみでキャッシュメモリだけの Todo アプリを作成
- Next.js でデータベースと連携した Todo アプリを作成
- やり残していた Dokoiku-VR のイシューを実装
  - 技術投稿版
  - 二段階認証
  - フォロー・フォロワー機能
  - これで完全公開
- instaVRam を作成したい